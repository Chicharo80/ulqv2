fetch("https://script.google.com/macros/s/AKfycbwRfOR_8cbQcrcYuTqDzp2UJs6tDlMuuri9bh0bNLJ6lajzURp1gTFqk7hA3_bP2wbo/exec", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    accion: "generarCodigo",
    ...payload
  })
})
.then(r => r.json())
.then(res => {
  console.log("RESPUESTA:", res);
  if(res.ok){
    mostrarResultado(res, payload);
  } else {
    alert(res.message || "Error al generar");
  }
})
.catch(err => {
  console.error("ERROR FETCH:", err);
  alert("Error de red");
});
